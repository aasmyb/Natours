var e=require("axios");function t(e){return e&&e.__esModule?e.default:e}const s=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)},a=(e,t)=>{s();const a=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",a),window.setTimeout(s,5e3)},r=async(s,r)=>{try{"success"===(await t(e)({method:"POST",url:"/api/v1/users/login",data:{email:s,password:r}})).data.status&&(a("success","Logged in successfully!"),setTimeout((()=>{location.assign("/")}),1500))}catch(e){a("error",e.response.data.message)}},o=async(s,r)=>{try{const o="password"===r?"/api/v1/users/updatePassword":"/api/v1/users/updateMe";"success"===(await t(e)({method:"PATCH",url:o,data:s})).data.status&&a("success",`Your ${r} is Updated Successfully`)}catch(e){a("error",e.response.data.message)}},c=async s=>{try{const a=Stripe("pk_test_51LrHPxIhnYPvSEUkRzkvVVwgahU9uKRfe50hdFCLBtyge9zevpHLQb0swHDnejHyOTdKQ5wVTM0aRehIZdx9Vrnr00RIaguQdc"),r=await t(e)(`/api/v1/bookings/checkout-session/${s}`);await a.redirectToCheckout({sessionId:r.data.session.id})}catch(e){a("error",e)}},n=(e,t,s)=>{document.querySelector(e).addEventListener(t,s)},u=e=>document.querySelector(e);if(u(".form--login")){n(".form--login","submit",(async e=>{e.preventDefault();const t=u("#email").value,s=u("#password").value;await r(t,s)}))}if(u(".nav__el--logout")&&n(".nav__el--logout","click",(async()=>{"success"===(await t(e)({method:"GET",url:"/api/v1/users/logout"})).data.status&&location.assign("/")})),u(".form-user-data")){const e=async e=>{e.preventDefault();const t=Object.fromEntries([...new FormData(e.currentTarget)]);e.currentTarget.reset(),await o(t,"password")};n(".form-user-data","submit",(async e=>{e.preventDefault();const t=new FormData(e.currentTarget);await o(t,"data")})),n(".form-user-settings","submit",e)}if(u("#book-tour")){n("#book-tour","click",(async e=>await c(e.currentTarget.dataset.tourId)))}const i=u("body").dataset.alert;i&&a("success",i);
//# sourceMappingURL=index.js.map
